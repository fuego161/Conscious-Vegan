<?php
get_header();

$location = get_the_ID();

$base_args = [
	'location' => $location,
	'is_sub_field' => false,
];

get_template_part('inc/components/flexible', 'intro', [
	'location' => $location,
	'is_sub_field' => false,
	'date' => [
		'day' => get_the_date('j'),
		'suffix' => get_the_date('S'),
		'month_year' => get_the_date(' F, Y'),
	],
]);

get_template_part('inc/components/flexible', 'split', $base_args);
?>

<section class="share">
	<div class="wrapper">

		<h2 class="share__title">Share This Post</h2>

		<div class="share__output">

			<?php
			$share_platforms = [
				'facebook' => [
					'icon' => '<svg class="share__icon" width="100%" height="100%" viewbox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">
						<path d="M14.737 19.501c0 2.074-.005 4.142.005 6.215 0 .227-.062.289-.289.284-1.764-.01-3.522-.01-5.286 0-.243 0-.32-.057-.32-.31.01-4.11.005-8.216.005-12.326 0-.413.046-.361-.376-.366-.748 0-1.496-.005-2.244.005-.18 0-.232-.057-.232-.237.005-1.305.005-2.615 0-3.92 0-.18.052-.237.232-.232.784.01 1.563-.005 2.347.01.211.005.278-.051.278-.273-.01-1.099 0-2.202-.005-3.3-.005-.914.134-1.796.593-2.6.495-.877 1.238-1.48 2.156-1.872.774-.33 1.588-.485 2.424-.531C15.68-.045 17.341.032 18.997 0c.185-.005.232.062.232.237a532.068 532.068 0 000 4.075c0 .206-.078.237-.258.237-.954-.005-1.908-.005-2.862-.005-.795 0-1.367.572-1.367 1.356 0 .81.01 1.615-.005 2.424-.005.232.072.289.294.289 1.304-.01 2.614 0 3.92-.01.216 0 .288.062.262.278-.077.666-.144 1.33-.216 1.996-.067.64-.18 1.274-.284 1.908-.03.18-.088.222-.253.222-1.119-.005-2.233-.005-3.352 0-.438 0-.377-.057-.377.387.006 2.032.006 4.07.006 6.106z"/>
					</svg>'
				],
				'twitter' => [
					'icon' => '<svg class="share__icon" width="100%" height="100%" viewbox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">
						<path fill-rule="evenodd" clip-rule="evenodd" d="M12.624 7.993l.057.975-.94-.12C8.322 8.391 5.336 6.84 2.8 4.235L1.56 2.942l-.32.955C.565 6.024.997 8.272 2.406 9.783c.751.835.582.955-.714.458-.451-.16-.846-.279-.883-.22-.132.14.32 1.95.676 2.666.489.994 1.484 1.969 2.574 2.545l.92.458-1.09.02c-1.051 0-1.089.02-.976.437.376 1.293 1.86 2.665 3.513 3.262l1.165.417-1.015.637a10.209 10.209 0 01-5.035 1.471c-.845.02-1.54.1-1.54.16 0 .198 2.292 1.312 3.626 1.75 4.001 1.292 8.754.735 12.324-1.472 2.536-1.571 5.072-4.694 6.256-7.716.638-1.611 1.277-4.555 1.277-5.967 0-.914.056-1.034 1.108-2.128.62-.636 1.203-1.332 1.316-1.53.187-.379.169-.379-.79-.04-1.596.596-1.822.516-1.033-.379.583-.636 1.278-1.79 1.278-2.127 0-.06-.282.04-.601.218-.339.2-1.09.497-1.654.676l-1.014.339-.92-.657c-.508-.358-1.222-.755-1.597-.875-.959-.278-2.424-.238-3.288.08a5.7 5.7 0 00-3.664 5.727z"/>
					</svg>'
				],
				'linkedIn' => [
					'icon' => '<svg class="share__icon" width="100%" height="100%" viewbox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">
						<path d="M14.026 10.974c.218-.132.305-.325.416-.483a5.614 5.614 0 012.092-1.772c1.168-.574 2.407-.635 3.657-.518.96.087 1.868.412 2.696.94.985.63 1.691 1.503 2.174 2.549a7.8 7.8 0 01.604 2.01c.107.656.188 1.3.188 1.966-.005 3.3-.005 6.602.005 9.902 0 .234-.066.295-.295.29-1.559-.01-3.113-.01-4.672 0-.228 0-.279-.066-.279-.285.005-3.112.02-6.23-.005-9.343-.005-.706-.101-1.407-.467-2.052-.325-.569-.777-.975-1.371-1.208-.797-.315-1.62-.376-2.453-.143-.843.234-1.427.787-1.843 1.54-.234.42-.315.862-.381 1.335-.066.507-.056 1.005-.056 1.508-.01 2.777-.01 5.55 0 8.328 0 .254-.061.325-.32.32-1.539-.015-3.082-.01-4.621 0-.213 0-.29-.066-.284-.264.005-.142.015-.285.015-.427 0-5.357.005-10.715-.005-16.072 0-.223.045-.305.29-.305 1.548.01 3.097.01 4.646 0 .208 0 .279.051.274.27-.015.619-.005 1.244-.005 1.914zM5.53 8.846c0 .179.005.358.005.536v16.139c0 .327 0 .327-.339.327H.22c-.005-.128-.01-.256-.01-.383V13.397c0-1.436.005-2.876-.006-4.31 0-.185.047-.251.245-.251 1.694.01 3.388.005 5.082.01zM5.535 2.895a2.691 2.691 0 11-5.383 0 2.691 2.691 0 015.383 0z"/>
					</svg>'
				],
			];

			foreach ($share_platforms as $platform => $data) {
			?>

				<a class="share__link" href="javascript:;" rel="nofollow" data-platform="<?php echo $platform; ?>">
					<?php echo $data['icon']; ?>
				</a>

			<?php
			}
			?>

			<div class="share__info">
				<p class="title"><?php echo get_the_title(); ?></p>
				<p class="permalink"><?php echo get_the_permalink(); ?></p>
			</div>

		</div><!-- .share__output -->

	</div><!-- .wrapper -->
</section>

<?php
get_template_part('inc/components/flexible', 'cta', $base_args);

$more_posts = new WP_Query([
	'post_type' => 'post',
	'posts_per_page' => 3,
	'orderby' => 'rand',
	'post__not_in' => [get_the_ID()],
]);

if ($more_posts->have_posts()) {
?>

	<section class="posts posts--more">
		<div class="wrapper">

			<h2 class="section-title">Other News</h2>

			<div class="posts__output">

				<?php
				while ($more_posts->have_posts()) {
					$more_posts->the_post();

					get_template_part('inc/shared-loops/content', 'blog-posts');
				}
				?>

			</div><!-- posts__output -->

		</div><!-- .wrapper -->
	</section><!-- .posts -->

<?php
}

get_footer();
?>
